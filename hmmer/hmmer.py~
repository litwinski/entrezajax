import urllib
import urllib2
import logging

def phmmer(**kwargs):
    param_dict = {'seq' : kwargs.get('seq'),
                  'seqdb' : kwargs.get('seqdb'),
                  'output' : 'json', 
                  'algo' : 'phmmer'}
    logging.debug(param_dict)

    params = urllib.urlencode(param_dict)
    req = urllib2.Request("http://hmmer.janelia.org/search/phmmer",
                          data = params,
                          headers={"Accept" : "application/json"})
    f = urllib2.urlopen(req)
    return f


def test():
    seq = """>2abl_A mol:protein length:163  ABL TYROSINE KINASE
MGPSENDPNLFVALYDFVASGDNTLSITKGEKLRVLGYNHNGEWCEAQTKNGQGWVPSNYITPVNSLEKHS
WYHGPVSRNAAEYLLSSGINGSFLVRESESSPGQRSISLRYEGRVYHYRINTASDGKLYVSSESRFNTLAE
LVHHHSTVADGLITTLHYPAP"""
    handle = phmmer(seqdb = 'pdb', seq = seq)
    print handle.read()


test()

